<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}" lang="en">
<head>
    <title>User</title>
</head>
<body layout:fragment="body" class="d-flex flex-column h-100">
<main class="flex-shrink-0">
    <!-- Page Content-->
    <section  class="py-5">
        <div class="container my-5
                    bg-info-subtle border border-warning-subtle rounded-5">
            <h1 class="text-primary courgette-regular text-center my-5">Hello <span class="text-success"
                                                                   th:text="${user.firstName}"></span></h1>
            <hr>


            <H3 class="text-primary"> Make your <span class="courgette-regular text-success">weekly plan</span></H3>

            <div class="slider-container">
                <form role="form" method="post" th:action="@{/generateSchedule}" th:object="${diet}">
                <div class="mx-auto">
                        <input type="range" class="form-range protein-slider" min="0" max="100" step="25"
                               id="Protein">
                        <label for="Protein" id="fish-label" class="slider-label">Fish</label>
                        <output id="FishOut" for="Protein">50%</output>
                        <label id="meat-label" class="slider-label">Meat</label>
                        <output id="MeatOut" for="Protein">50%</output>
                        <input type="hidden" id="fishValue" th:field="*{fishPercentage}">
                        <input type="hidden" id="meatValue" th:field="*{meatPercentage}">
                </div>
                    <div class="mx-auto">
                        <input type="range" class="form-range protein-slider" min="0" max="100" step="25"
                               id="Vegetarian" th:field="*{vegetablePercentage}">
                        <label for="Vegetarian" id="VegetarianLabel" class="slider-label">Vegetarian</label>
                        <output id="VegetarianOut" for="Protein">0%</output>
                    </div>
                    <div class="mx-auto">
                        <label for="date" class="form-label">Start Date</label>
                        <input type="date" class="form-control" id="date" th:field="*{startDate}" required>
                        <p class="error" th:if="${#fields.hasErrors('startDate')}" th:errors="*{startDate}"></p>
                    </div>
                <div class="d-flex justify-content-center">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
                </form>

            </div>
            <hr>
            <div class="container">
                <h1 class="text-primary text-center m-5">Your meal <span class="courgette-regular text-success"> Plan
                </span></h1>
                <div class="row">
<!--                    Refeição-->
                    <div class="col-lg-3 col-md-5 col-10 m-2 p-3
                            bg-success border border-warning-subtle rounded-2"
                         th:each="entry : ${mealsByDate}">


                        <div class="row text-center">
                            <h2>
                                <span class="text-primary courgette-regular" th:text="${entry.value[0].name}"></span>
                            </h2>
                            <p>
                                <span class="text-white courgette-regular" th:text="${#temporals.format(entry.key,'dd-MM-yyyy')}"></span>
                            </p>


                        </div>


                        <div th:each="meal : ${entry.value}" >
                            <div class="row rounded-3 shadow-sm bg-white m-2 p-2">
                                <div class="col-4 ">
                                    <img class="w-100 rounded border border-info-subtle"
                                         th:src="@{${meal.recipe.imageUrl}}" alt=""/>
                                </div>

                                <div class="col-7 align-content-around">
                                    <div class="row my-auto">
                                        <div class="col-12">
                                            <a th:href="@{/recipes/{recipeId}(recipeId=${meal.recipe.id})}"
                                               class="text-primary mt-5 text-decoration-none"
                                            ><h6 th:text="${meal.recipe.name}"></h6></a>
                                        </div>
                                    </div>

                                    <div class="row ">
                                        <div class="col pb-0 ">
                                            <p
                                                    th:text="${meal.mealType.name}" class="text-primary"></p>
                                        </div>

                                        <div class="col text-end">

                                            <p class="text-primary">
                                                <i class="fa-solid fa-drumstick-bite text-warning"
                                                   th:if="${meal.recipe.category} == 'Meat'"></i>
                                                <i class="fa-solid fa-fish" style="color: hsl(188, 70%, 32%)"
                                                   th:if="${meal.recipe.category} == 'Fish'"></i>
                                                <i class="fa-solid fa-leaf text-success"
                                                   th:if="${meal.recipe.category} == 'Vegetarian'"></i>
                                                <a class="text-dark" th:href="@{/shuffleMeal/{mealId}(mealId=${meal.id})}" ><i class="fa-solid fa-arrows-rotate text-secondary"></i></a>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

<!--                        <div class="bg-white my-2" th:each="meal : ${entry.value}">-->

<!--                            <h4 th:text="${meal.mealType.name}"></h4>-->
<!--                            <img class="w-100 rounded-5 border border-warning-subtle shadow-lg"-->
<!--                                 th:src="@{${meal.recipe.imageUrl}}" alt="Current Image">-->
<!--                            <p th:text="${meal.recipe.name}"></p>-->

<!--                            <div class="row">-->
<!--                                <div class="col">-->
<!--                                    <p class="text-primary">-->
<!--                                        <i class="fa-solid fa-drumstick-bite text-warning"-->
<!--                                           th:if="${meal.recipe.category} == 'Meat'"></i>-->
<!--                                        <i class="fa-solid fa-fish" style="color: hsl(188, 70%, 32%)"-->
<!--                                           th:if="${meal.recipe.category} == 'Fish'"></i>-->
<!--                                        <i class="fa-solid fa-leaf text-success"-->
<!--                                           th:if="${meal.recipe.category} == 'Vegetarian'"></i>-->
<!--                                        <span th:text="${meal.recipe.category}"></span>-->
<!--                                    </p>-->
<!--                                </div>-->
<!--                                <div class="col" >-->
<!--                                    <a class="text-dark" th:href="@{/shuffleMeal/{mealId}(mealId=${meal.id})}" ><i-->
<!--                                    class="fa-solid fa-arrows-rotate text-secondary"></i></a>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                    </div>-->
<!--                </div>-->


            </div>
                </div>
            </div>
        </div>
    </section>
</main>
